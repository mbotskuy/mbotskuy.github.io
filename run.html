<!DOCTYPE html>
<html>
<head>
    <title>POPOK SPEED RUN</title>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css">
</head>
<body>
    <div class="container">
        <h1 class="text-center">POPOK SPEED RUN</h1>
        <form id="gameForm">
            <label for="sessionToken">sessionToken</label>
            <input type="text" id="sessionToken" name="sessionToken" required class="form-control">
            <br><br>
            <label for="gameSelect">Game</label>
            <select id="gameSelect" name="gameSelect" class="form-control">
                  <option value="Diamond Flash">Diamond Flash</option>
                <option value="Richy Panda">Richy Panda</option>
                <option value="Los Toros">Los Toros</option>
                <option value="Lost Treasure">Lost Treasure</option>
                <option value="The Power of Kitsune">The Power of Kitsune</option>
                <option value="Crazy Poki">Crazy Poki</option>
                <option value="Yummy: Buy Feature">Yummy: Buy Feature</option>
                <option value="FastMaster">FastMaster</option>
            </select>
            <br><br>
            <button type="submit" class="btn btn-primary">Play</button>
            
            <button type="button" id="stopButton" class="btn btn-secondary">Stop</button>
        </form>
        <textarea id="logTextarea" rows="10" cols="50" readonly class="form-control"></textarea>
<button type="button" id="freeSpinButton" class="btn btn-primary">Freespin</button>
    </div>

    <script>
        var intervalId;

        function appendLog(message) {
            var logTextarea = document.getElementById("logTextarea");
            logTextarea.value += message + "\n";
            logTextarea.scrollTop = logTextarea.scrollHeight;
        }

        document.getElementById("gameForm").addEventListener("submit", function(event) {
            event.preventDefault();

            var sessionToken = document.getElementById("sessionToken").value;
            var selectedGame = document.getElementById("gameSelect").value;

            intervalId = setInterval(function() {
                var command = {
                    "command": "play",
                    "data": {
                        "action": "spin",
                        "game": selectedGame,
                        "gameId": getGameId(selectedGame),
                        "betPerLine": getBetPerLine(selectedGame),
                        "lines": getLines(selectedGame),
                        "doubleChance": getDoubleChance(selectedGame),
                        "gameMode": "real"
                    },
                    "cid": getCid(selectedGame)
                };

                sendCommand(JSON.stringify(command), sessionToken);
            }, 10);
        });
       var timeoutId;

document.getElementById("freeSpinButton").addEventListener("click", function() {
    var selectedGame = document.getElementById("gameSelect").value;
    var sessionToken = document.getElementById("sessionToken").value;

    function freeSpin() {
        var command = {
            "command": "play",
            "data": {
                "action": "freeSpin",
                "game": selectedGame,
                "gameId": getGameId(selectedGame),
                "betPerLine": getBetPerLine(selectedGame),
                "lines": getLines(selectedGame),
                "doubleChance": getDoubleChance(selectedGame),
                "gameMode": "real"
            },
            "cid": getCid(selectedGame)
        };

        sendCommand(JSON.stringify(command), sessionToken);

        timeoutId = setTimeout(freeSpin, 1000);
    }

    freeSpin();
});

document.getElementById("stopButton").addEventListener("click", function() {
    clearTimeout(timeoutId);
});

        document.getElementById("stopButton").addEventListener("click", function() {
            clearInterval(intervalId);
        });

        function getGameId(game) {
            switch (game) {
                case "Diamond Flash":
                    return 2;
                case "Richy Panda":
                    return 45;
                case "Los Toros":
                    return 52;
                case "Lost Treasure":
                    return 27;
                case "The Power of Kitsune":
                    return 72;
                case "Crazy Poki":
                    return 42;
                case "Yummy: Buy Feature":
                    return 28;
                case "FastMaster":
                    return 94;
                default:
                    return 0;
            }
        }

        function getBetPerLine(game) {
            switch (game) {
                case "Diamond Flash":
                    return 20;
                case "Richy Panda":
                    return 10;
                case "Los Toros":
                    return 50;
                case "Lost Treasure":
                    return 10;
                case "The Power of Kitsune":
                    return 100;
                case "Crazy Poki":
                    return 20;
                case "Yummy: Buy Feature":
                    return 100;
                case "FastMaster":
                    return 100;
                default:
                    return 0;
            }
        }

        function getLines(game) {
            switch (game) {
                case "Diamond Flash":
                    return 10;
                case "Richy Panda":
                    return 10;
                case "Los Toros":
                    return 10;
                case "Lost Treasure":
                    return 10;
                case "The Power of Kitsune":
                    return 20;
                case "Crazy Poki":
                    return 20;
                case "Yummy: Buy Feature":
                    return 10;
                case "FastMaster":
                    return 10;
                default:
                    return 0;
            }
        }

        function getDoubleChance(game) {
            switch (game) {
                case "Diamond Flash":
                    return false;
                case "Richy Panda":
                    return false;
                case "Los Toros":
                    return false;
                case "Lost Treasure":
                    return false;
                case "The Power of Kitsune":
                    return false;
                case "Crazy Poki":
                    return false;
                case "Yummy: Buy Feature":
                    return false;
                case "FastMaster":
                    return false;
                default:
                    return false;
            }
        }

        function getCid(game) {
            switch (game) {
                case "Diamond Flash":
                    return 1;
                case "Richy Panda":
                    return 1;
                case "Los Toros":
                    return 1;
                case "Lost Treasure":
                    return 1;
                case "The Power of Kitsune":
                    return 1;
                case "Crazy Poki":
                    return 1;
                case "Yummy: Buy Feature":
                    return 1;
                case "FastMaster":
                    return 1;
                default:
                    return 0;
            }
        }

        function sendCommand(command, sessionToken) {
            var ws = new WebSocket("wss://ws-se1.pokgaming.com/?sessionToken=" + sessionToken + "&lang=en&gameId=94");

            ws.onopen = function() {
                appendLog("Connection established");
                ws.send(command);
            };

            ws.onmessage = function(event) {
    appendLog(event.data);
    
};


            ws.onerror = function(error) {
                appendLog("Error: " + error);
            };

            
        }
    </script>
</body>
</html>
